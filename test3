--// Helper Function for Randomized Sleep
local function RandomSleep(min, max)
    wait(math.random(min, max))
end

--// Obfuscated Function Names
local RS = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local PS = game:GetService("Players")
local CAM = workspace.CurrentCamera
local LP = PS.LocalPlayer
local ESPStatus = true
local AimbotStatus = true
local RefreshDelay = math.random(1, 3) -- Random delay for ESP refresh

--// Create ESP with obfuscated code
local function b7v3V1(player)
    local ESPObj = Instance.new("Highlight")
    ESPObj.Parent = player.Character
    ESPObj.Adornee = player.Character

    if player.Team == LP.Team then
        ESPObj.FillColor = Color3.fromRGB(0, 255, 0) -- Teammate color
    else
        ESPObj.FillColor = Color3.fromRGB(255, 0, 0) -- Enemy color
    end
    ESPObj.OutlineColor = Color3.fromRGB(0, 0, 0)
    ESPObj.Enabled = ESPStatus

    player.CharacterRemoving:Connect(function()
        ESPObj:Destroy()
    end)
    return ESPObj
end

--// Aimbot with obfuscated name and smoother code
local function a1mbo7()
    local LeftControl = false
    if LeftControl and AimbotStatus then
        local closestPlayer, minDist = nil, math.huge
        for _, p in pairs(PS:GetPlayers()) do
            if p ~= LP and p.Character and p.Character:FindFirstChild("Head") then
                if p.Team ~= LP.Team then
                    local targetPos = p.Character.Head.Position + Vector3.new(0, 0.5, 0)
                    local screenPos, onScreen = CAM:WorldToViewportPoint(targetPos)
                    if onScreen then
                        local mousePos = UIS:GetMouseLocation()
                        local dist = (Vector2.new(mousePos.X, mousePos.Y) - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
                        if dist < minDist then
                            minDist = dist
                            closestPlayer = p
                        end
                    end
                end
            end
        end
        if closestPlayer then
            local targetPos = closestPlayer.Character.Head.Position + Vector3.new(0, 0.5, 0)
            local newCameraCFrame = CFrame.new(CAM.CFrame.Position, targetPos)
            CAM.CFrame = newCameraCFrame:Lerp(CAM.CFrame, 0.5)
        end
    end
end

--// Obfuscated User Input Logic
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.LeftControl then
        LeftControl = true
    end
end)

UIS.InputEnded:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.LeftControl then
        LeftControl = false
    end
end)

--// Enhanced ESP Refresh with Random Delays
local function h8e7p1()
    while true do
        RandomSleep(1, 3) -- Randomized delay for ESP refresh
        for _, player in pairs(PS:GetPlayers()) do
            if player.Character then
                local existingESP = player.Character:FindFirstChildOfClass("Highlight")
                if existingESP then
                    if player.Team == LP.Team then
                        existingESP.FillColor = Color3.fromRGB(0, 255, 0)
                    else
                        existingESP.FillColor = Color3.fromRGB(255, 0, 0)
                    end
                else
                    b7v3V1(player)
                end
            end
        end
    end
end

--// Start ESP Refresh
coroutine.wrap(h8e7p1)()

--// Initialize ESP for all players
local function SetupPlayer(player)
    player.CharacterAdded:Connect(function(character)
        character:WaitForChild("Head")
        b7v3V1(player)
    end)
    if player.Character then
        b7v3V1(player)
    end
end

for _, player in pairs(PS:GetPlayers()) do
    SetupPlayer(player)
end

PS.PlayerAdded:Connect(function(player)
    SetupPlayer(player)
end)

--// Main Render Loop for Aimbot
RS.RenderStepped:Connect(function()
    a1mbo7()
end)
