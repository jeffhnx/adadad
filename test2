--// ESP Script for Roblox Rush Point
--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

--// ESP Settings
local ESPEnabled = true
local TeamCheck = true -- Set to true to avoid highlighting teammates

--// Create a BillboardGUI to act as a box
local function CreateESPBox(character)
    local box = Instance.new("BoxHandleAdornment")
    box.Size = character.HumanoidRootPart.Size + Vector3.new(1, 1, 1) -- Fit to the character size
    box.Adornee = character.HumanoidRootPart
    box.ZIndex = 10
    box.AlwaysOnTop = true
    box.Transparency = 0.5

    if TeamCheck and character:FindFirstChild("HumanoidRootPart") and character.Parent then
        -- Check for team color and set accordingly
        if Players:FindFirstChild(character.Parent.Name).Team == LocalPlayer.Team then
            box.Color3 = Color3.new(0, 1, 0) -- Green for teammates
        else
            box.Color3 = Color3.new(1, 0, 0) -- Red for enemies
        end
    end

    box.Parent = character.HumanoidRootPart
end

--// Apply ESP to Players
local function ApplyESP(player)
    player.CharacterAdded:Connect(function(character)
        if character:WaitForChild("HumanoidRootPart", 5) then
            CreateESPBox(character)
        end
    end)

    if player.Character then
        if player.Character:FindFirstChild("HumanoidRootPart") then
            CreateESPBox(player.Character)
        end
    end
end

--// Loop through all players and apply ESP
for _, player in pairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        ApplyESP(player)
    end
end

--// Apply ESP to new players joining
Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        ApplyESP(player)
    end
end)

--// Optional: Disable ESP using a toggle
local function ToggleESP(input)
    if input.KeyCode == Enum.KeyCode.G then
        ESPEnabled = not ESPEnabled
        for _, player in pairs(Players:GetPlayers()) do
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local box = player.Character.HumanoidRootPart:FindFirstChildOfClass("BoxHandleAdornment")
                if box then
                    box.Visible = ESPEnabled
                end
            end
        end
    end
end

--// User input to toggle ESP on/off
game:GetService("UserInputService").InputBegan:Connect(ToggleESP)
