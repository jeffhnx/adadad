-- Bed-breaking script
local bedPart = workspace:WaitForChild("BedPart") -- Replace with your bed part's name
local damageThreshold = 10 -- How much damage is required to break the bed
local bedHealth = damageThreshold -- Initialize bed health
local bedBroken = false -- Track if the bed is broken

-- Function to handle bed damage
local function onBedDamaged(damageAmount)
    if bedBroken then return end  -- If the bed is already broken, don't do anything
    bedHealth = bedHealth - damageAmount

    if bedHealth <= 0 then
        -- Bed is broken, trigger game logic here
        bedBroken = true
        print("Bed is broken!")

        -- Example: Disable bed part to signify it is destroyed
        bedPart.CanCollide = false
        bedPart.Transparency = 1

        -- Example: Announce to all players that the bed is broken
        for _, player in pairs(game.Players:GetPlayers()) do
            game.ReplicatedStorage.BedBrokenEvent:FireClient(player)
        end

        -- Additional logic like respawning or ending the game could go here
    end
end

-- Simulating damage (you can link this with player attacks)
game:GetService("Players").PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        -- Create a dummy damage event for testing (simulating player attack)
        local damageEvent = Instance.new("RemoteEvent")
        damageEvent.Name = "DamageEvent"
        damageEvent.Parent = player:WaitForChild("PlayerScripts")
        
        damageEvent.OnServerEvent:Connect(function(player, damageAmount)
            onBedDamaged(damageAmount)
        end)
    end)
end)

-- Optional: Add damage to the bed manually for testing
onBedDamaged(5) -- Call this to simulate 5 damage to the bed
onBedDamaged(5) -- Call again to simulate breaking the bed
